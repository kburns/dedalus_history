{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/64/comments/53150407.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/64#comment-53150407"}}, "issue": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/64.json"}}, "type": "issue", "id": 64, "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "title": "NCCs cause strange MPI crashes after commit 4232435 in 3D domains with distributed processor meshes"}, "content": {"raw": "Ok, I just pushed a few commits implementing a fix to properly cache the NCCs based on just the argument\u2019s z-metadata.  I was able to reproduce the errors on my desktop so I don\u2019t think it was a stack issue at all \u2013 I must not have been using a recent enough build of Dedalus on the flatiron cluster to see it before.  It looks like the bug was causing the code to rebuild the NCCs for every pencil, and this requires communication, so it can deadlock if there\u2019s an imbalanced pencil distribution.  These new commits fix the issue for me, but can you check if they work for you?", "markup": "markdown", "html": "<p>Ok, I just pushed a few commits implementing a fix to properly cache the NCCs based on just the argument\u2019s z-metadata.  I was able to reproduce the errors on my desktop so I don\u2019t think it was a stack issue at all \u2013 I must not have been using a recent enough build of Dedalus on the flatiron cluster to see it before.  It looks like the bug was causing the code to rebuild the NCCs for every pencil, and this requires communication, so it can deadlock if there\u2019s an imbalanced pencil distribution.  These new commits fix the issue for me, but can you check if they work for you?</p>", "type": "rendered"}, "created_on": "2019-07-25T23:47:13.260530+00:00", "user": {"display_name": "Keaton Burns", "uuid": "{3d3e64f1-bf12-45df-b655-4543d8fb34c4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D"}, "html": {"href": "https://bitbucket.org/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e31a7835-5317-4dfa-8551-f32a06f40279/40f33f99-2b75-4a17-a8c2-07c8d74c7480/128"}}, "nickname": "kburns", "type": "user", "account_id": "557058:e31a7835-5317-4dfa-8551-f32a06f40279"}, "updated_on": null, "type": "issue_comment", "id": 53150407}