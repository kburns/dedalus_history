{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "links": {"attachments": {"href": "data/repositories/dedalus-project/dedalus/issues/39/attachments_page=1.json"}, "self": {"href": "data/repositories/dedalus-project/dedalus/issues/39.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/39/watch"}, "comments": {"href": "data/repositories/dedalus-project/dedalus/issues/39/comments_page=1.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/39/dedalus-hangs-in-parallel-when-attempting"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/39/vote"}}, "reporter": {"display_name": "J. S. Oishi", "uuid": "{ab7c2db2-7642-47a8-9264-0939f601d904}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D"}, "html": {"href": "https://bitbucket.org/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:94f96ca9-adbd-4972-8f41-b00b9683f819/4a90742a-28a5-4829-a074-c23c9f5fcc81/128"}}, "nickname": "jsoishi", "type": "user", "account_id": "557058:94f96ca9-adbd-4972-8f41-b00b9683f819"}, "title": "Dedalus hangs in parallel when attempting a 3D interpolation using a Chebyshev basis", "component": null, "votes": 0, "watches": 1, "content": {"raw": "If one attempts to perform an interpolation to a single point in 3D *before* the transposes are created, Dedalus will hang if one of the bases is Chebyshev. \r\n\r\nA workaround is to force the transposes to be created before the interpolation, for example by doing \r\n\r\n```\r\ndata['c']\r\ndata['g']\r\n```\r\n\r\nThe attached script provides a minimal working example. It runs fine in serial, but hangs in parallel if the workaround remains commented out. \r\n\r\nOther notes: \r\n\r\n* the bug does not manifest if interpolation is done along only one dimension (even if it is the Chebyshev dimension)\r\n* This problem occurs in practice if one wishes to drop a \"probe\" in the flow to get a field at a given point and output it to a high time-cadence analysis task. The simulation will hang if the analysis task is triggered before the first timestep (as it is by default)", "markup": "markdown", "html": "<p>If one attempts to perform an interpolation to a single point in 3D <em>before</em> the transposes are created, Dedalus will hang if one of the bases is Chebyshev. </p>\n<p>A workaround is to force the transposes to be created before the interpolation, for example by doing </p>\n<div class=\"codehilite\"><pre><span></span>data[&#39;c&#39;]\ndata[&#39;g&#39;]\n</pre></div>\n\n\n<p>The attached script provides a minimal working example. It runs fine in serial, but hangs in parallel if the workaround remains commented out. </p>\n<p>Other notes: </p>\n<ul>\n<li>the bug does not manifest if interpolation is done along only one dimension (even if it is the Chebyshev dimension)</li>\n<li>This problem occurs in practice if one wishes to drop a \"probe\" in the flow to get a field at a given point and output it to a high time-cadence analysis task. The simulation will hang if the analysis task is triggered before the first timestep (as it is by default)</li>\n</ul>", "type": "rendered"}, "assignee": {"display_name": "J. S. Oishi", "uuid": "{ab7c2db2-7642-47a8-9264-0939f601d904}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D"}, "html": {"href": "https://bitbucket.org/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:94f96ca9-adbd-4972-8f41-b00b9683f819/4a90742a-28a5-4829-a074-c23c9f5fcc81/128"}}, "nickname": "jsoishi", "type": "user", "account_id": "557058:94f96ca9-adbd-4972-8f41-b00b9683f819"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-06-15T15:05:56.647815+00:00", "milestone": null, "updated_on": "2018-06-19T18:26:38.430951+00:00", "type": "issue", "id": 39}