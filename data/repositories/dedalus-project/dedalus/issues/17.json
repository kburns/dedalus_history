{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "links": {"attachments": {"href": "data/repositories/dedalus-project/dedalus/issues/17/attachments_page=1.json"}, "self": {"href": "data/repositories/dedalus-project/dedalus/issues/17.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/17/watch"}, "comments": {"href": "data/repositories/dedalus-project/dedalus/issues/17/comments_page=1.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/17/example-notebooks-2-and3-dont-work"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/17/vote"}}, "reporter": {"display_name": "J. S. Oishi", "uuid": "{ab7c2db2-7642-47a8-9264-0939f601d904}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D"}, "html": {"href": "https://bitbucket.org/%7Bab7c2db2-7642-47a8-9264-0939f601d904%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:94f96ca9-adbd-4972-8f41-b00b9683f819/4a90742a-28a5-4829-a074-c23c9f5fcc81/128"}}, "nickname": "jsoishi", "type": "user", "account_id": "557058:94f96ca9-adbd-4972-8f41-b00b9683f819"}, "title": "Example notebooks 2 and3 don't work", "component": null, "votes": 0, "watches": 2, "content": {"raw": "The example notebooks in the documentation repository do not work with the tip of dedalus. Notebook 2 does not work because the dedalus-project/dedalus_extras repository is currently empty. Notebook 3 fails because pencil building fails on transverse Fourier bases: \r\n\r\n```\r\nsolver = de.solvers.IVP(problem, domain, de.timesteppers.SBDF2)\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-11-88eff79b98e1> in <module>()\r\n----> 1 solver = de.solvers.IVP(problem, domain, de.timesteppers.SBDF2)\r\n\r\n/home/jsoishi/hg-projects/dedalus2/dedalus2/pde/solvers.py in __init__(self, problem, domain, timestepper)\r\n    132         write_progress = (domain.distributor.rank == 0)\r\n    133         for p in progress(pencils, desc='Building pencil matrices (rank 0):', write=write_progress, bar=False):\r\n--> 134             p.build_matrices(problem, primary_basis)\r\n    135 \r\n    136         # Build systems\r\n\r\n/home/jsoishi/hg-projects/dedalus2/dedalus2/data/pencil.py in build_matrices(self, problem, basis)\r\n    165         # Start G_bc with integral term, since the Int matrix is always defined\r\n    166         self.G_eq = F * kron(basis.Pre, Se)\r\n--> 167         self.G_bc = kron(basis.Int, Si)\r\n    168         if Sl.any():\r\n    169             self.G_bc = self.G_bc + kron(basis.Left, Sl)\r\n\r\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/construct.py in kron(A, B, format)\r\n    299 \r\n    300     \"\"\"\r\n--> 301     B = coo_matrix(B)\r\n    302 \r\n    303     if (format is None or format == \"bsr\") and 2*B.nnz >= B.shape[0] * B.shape[1]:\r\n\r\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/coo.py in __init__(self, arg1, shape, dtype, copy)\r\n    182                     raise TypeError('expected rank <= 2 array or matrix')\r\n    183 \r\n--> 184                 self.shape = M.shape\r\n    185                 self.row, self.col = M.nonzero()\r\n    186                 self.data  = M[self.row, self.col]\r\n\r\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/base.py in set_shape(self, shape)\r\n     72 \r\n     73         if not (shape[0] >= 1 and shape[1] >= 1):\r\n---> 74             raise ValueError('invalid shape')\r\n     75 \r\n     76         if (self._shape != shape) and (self._shape is not None):\r\n\r\nValueError: invalid shape\r\n```", "markup": "markdown", "html": "<p>The example notebooks in the documentation repository do not work with the tip of dedalus. Notebook 2 does not work because the dedalus-project/dedalus_extras repository is currently empty. Notebook 3 fails because pencil building fails on transverse Fourier bases: </p>\n<div class=\"codehilite\"><pre><span></span>solver = de.solvers.IVP(problem, domain, de.timesteppers.SBDF2)\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-11-88eff79b98e1&gt; in &lt;module&gt;()\n----&gt; 1 solver = de.solvers.IVP(problem, domain, de.timesteppers.SBDF2)\n\n/home/jsoishi/hg-projects/dedalus2/dedalus2/pde/solvers.py in __init__(self, problem, domain, timestepper)\n    132         write_progress = (domain.distributor.rank == 0)\n    133         for p in progress(pencils, desc=&#39;Building pencil matrices (rank 0):&#39;, write=write_progress, bar=False):\n--&gt; 134             p.build_matrices(problem, primary_basis)\n    135 \n    136         # Build systems\n\n/home/jsoishi/hg-projects/dedalus2/dedalus2/data/pencil.py in build_matrices(self, problem, basis)\n    165         # Start G_bc with integral term, since the Int matrix is always defined\n    166         self.G_eq = F * kron(basis.Pre, Se)\n--&gt; 167         self.G_bc = kron(basis.Int, Si)\n    168         if Sl.any():\n    169             self.G_bc = self.G_bc + kron(basis.Left, Sl)\n\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/construct.py in kron(A, B, format)\n    299 \n    300     &quot;&quot;&quot;\n--&gt; 301     B = coo_matrix(B)\n    302 \n    303     if (format is None or format == &quot;bsr&quot;) and 2*B.nnz &gt;= B.shape[0] * B.shape[1]:\n\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/coo.py in __init__(self, arg1, shape, dtype, copy)\n    182                     raise TypeError(&#39;expected rank &lt;= 2 array or matrix&#39;)\n    183 \n--&gt; 184                 self.shape = M.shape\n    185                 self.row, self.col = M.nonzero()\n    186                 self.data  = M[self.row, self.col]\n\n/home/jsoishi/build/lib/python3.3/site-packages/scipy/sparse/base.py in set_shape(self, shape)\n     72 \n     73         if not (shape[0] &gt;= 1 and shape[1] &gt;= 1):\n---&gt; 74             raise ValueError(&#39;invalid shape&#39;)\n     75 \n     76         if (self._shape != shape) and (self._shape is not None):\n\nValueError: invalid shape\n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Keaton Burns", "uuid": "{3d3e64f1-bf12-45df-b655-4543d8fb34c4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D"}, "html": {"href": "https://bitbucket.org/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e31a7835-5317-4dfa-8551-f32a06f40279/40f33f99-2b75-4a17-a8c2-07c8d74c7480/128"}}, "nickname": "kburns", "type": "user", "account_id": "557058:e31a7835-5317-4dfa-8551-f32a06f40279"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2014-05-30T00:00:57.986234+00:00", "milestone": null, "updated_on": "2014-05-30T20:34:02.337146+00:00", "type": "issue", "id": 17}