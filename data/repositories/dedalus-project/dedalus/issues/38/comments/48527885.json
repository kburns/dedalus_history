{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/38/comments/48527885.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/38#comment-48527885"}}, "issue": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/38.json"}}, "type": "issue", "id": 38, "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "title": "Slow simulation NS2D over a biperiodic space?"}, "content": {"raw": "I confirm the nice improvement for Dedalus! Here are my measurements:\n\n```\naugier3pi@meige8pcpa79:~/Dev/fluidsim/bench/dedalus$ time python ns2d_rot_faster.py\n2018-10-24 10:17:24,379 pencil 0/1 INFO :: Building pencil matrix 1/171 (~1%) Elapsed: 0s, Remaining: 38s, Rate: 4.5e+00/s\n2018-10-24 10:17:28,216 pencil 0/1 INFO :: Building pencil matrix 18/171 (~11%) Elapsed: 4s, Remaining: 35s, Rate: 4.4e+00/s\n2018-10-24 10:17:32,193 pencil 0/1 INFO :: Building pencil matrix 36/171 (~21%) Elapsed: 8s, Remaining: 30s, Rate: 4.5e+00/s\n2018-10-24 10:17:34,197 pencil 0/1 INFO :: Building pencil matrix 45/171 (~26%) Elapsed: 10s, Remaining: 28s, Rate: 4.5e+00/s\n2018-10-24 10:17:36,202 pencil 0/1 INFO :: Building pencil matrix 54/171 (~32%) Elapsed: 12s, Remaining: 26s, Rate: 4.5e+00/s\n2018-10-24 10:17:40,211 pencil 0/1 INFO :: Building pencil matrix 72/171 (~42%) Elapsed: 16s, Remaining: 22s, Rate: 4.5e+00/s\n2018-10-24 10:17:44,248 pencil 0/1 INFO :: Building pencil matrix 90/171 (~53%) Elapsed: 20s, Remaining: 18s, Rate: 4.5e+00/s\n2018-10-24 10:17:48,339 pencil 0/1 INFO :: Building pencil matrix 108/171 (~63%) Elapsed: 24s, Remaining: 14s, Rate: 4.5e+00/s\n2018-10-24 10:17:52,393 pencil 0/1 INFO :: Building pencil matrix 126/171 (~74%) Elapsed: 28s, Remaining: 10s, Rate: 4.5e+00/s\n2018-10-24 10:17:54,160 pencil 0/1 INFO :: Building pencil matrix 134/171 (~78%) Elapsed: 30s, Remaining: 8s, Rate: 4.5e+00/s\n2018-10-24 10:17:56,405 pencil 0/1 INFO :: Building pencil matrix 144/171 (~84%) Elapsed: 32s, Remaining: 6s, Rate: 4.5e+00/s\n2018-10-24 10:18:00,536 pencil 0/1 INFO :: Building pencil matrix 162/171 (~95%) Elapsed: 36s, Remaining: 2s, Rate: 4.5e+00/s\n2018-10-24 10:18:02,561 pencil 0/1 INFO :: Building pencil matrix 171/171 (~100%) Elapsed: 38s, Remaining: 0s, Rate: 4.5e+00/s\nStarting startup loop...\nRun time for startup loop: 2.106695\nStarting main time loop...\nRun time for main loop: 1.607797\n\nreal\t0m43.280s\nuser\t0m42.668s\nsys\t0m0.820s\n\n\naugier3pi@meige8pcpa79:~/Dev/fluidsim/bench/dedalus$ time fluidsim-bench 512 -d 2 -s ns2d -it 10\nnh = (512, 512); Lh = (8, 8)\nrunning a benchmark simulation... done.\n10 time steps computed in 0.51 s\nresults benchmarks saved in\n/tmp/fluidsim_bench/result_bench_ns2d_512x512_np=1_default_2018-10-24_10-33-2516769.json\n\nCleaning up simulation.\n\nreal\t0m2.603s\nuser\t0m2.132s\nsys\t0m0.600s\n\n```", "markup": "markdown", "html": "<p>I confirm the nice improvement for Dedalus! Here are my measurements:</p>\n<div class=\"codehilite\"><pre><span></span>augier3pi@meige8pcpa79:~/Dev/fluidsim/bench/dedalus$ time python ns2d_rot_faster.py\n2018-10-24 10:17:24,379 pencil 0/1 INFO :: Building pencil matrix 1/171 (~1%) Elapsed: 0s, Remaining: 38s, Rate: 4.5e+00/s\n2018-10-24 10:17:28,216 pencil 0/1 INFO :: Building pencil matrix 18/171 (~11%) Elapsed: 4s, Remaining: 35s, Rate: 4.4e+00/s\n2018-10-24 10:17:32,193 pencil 0/1 INFO :: Building pencil matrix 36/171 (~21%) Elapsed: 8s, Remaining: 30s, Rate: 4.5e+00/s\n2018-10-24 10:17:34,197 pencil 0/1 INFO :: Building pencil matrix 45/171 (~26%) Elapsed: 10s, Remaining: 28s, Rate: 4.5e+00/s\n2018-10-24 10:17:36,202 pencil 0/1 INFO :: Building pencil matrix 54/171 (~32%) Elapsed: 12s, Remaining: 26s, Rate: 4.5e+00/s\n2018-10-24 10:17:40,211 pencil 0/1 INFO :: Building pencil matrix 72/171 (~42%) Elapsed: 16s, Remaining: 22s, Rate: 4.5e+00/s\n2018-10-24 10:17:44,248 pencil 0/1 INFO :: Building pencil matrix 90/171 (~53%) Elapsed: 20s, Remaining: 18s, Rate: 4.5e+00/s\n2018-10-24 10:17:48,339 pencil 0/1 INFO :: Building pencil matrix 108/171 (~63%) Elapsed: 24s, Remaining: 14s, Rate: 4.5e+00/s\n2018-10-24 10:17:52,393 pencil 0/1 INFO :: Building pencil matrix 126/171 (~74%) Elapsed: 28s, Remaining: 10s, Rate: 4.5e+00/s\n2018-10-24 10:17:54,160 pencil 0/1 INFO :: Building pencil matrix 134/171 (~78%) Elapsed: 30s, Remaining: 8s, Rate: 4.5e+00/s\n2018-10-24 10:17:56,405 pencil 0/1 INFO :: Building pencil matrix 144/171 (~84%) Elapsed: 32s, Remaining: 6s, Rate: 4.5e+00/s\n2018-10-24 10:18:00,536 pencil 0/1 INFO :: Building pencil matrix 162/171 (~95%) Elapsed: 36s, Remaining: 2s, Rate: 4.5e+00/s\n2018-10-24 10:18:02,561 pencil 0/1 INFO :: Building pencil matrix 171/171 (~100%) Elapsed: 38s, Remaining: 0s, Rate: 4.5e+00/s\nStarting startup loop...\nRun time for startup loop: 2.106695\nStarting main time loop...\nRun time for main loop: 1.607797\n\nreal    0m43.280s\nuser    0m42.668s\nsys 0m0.820s\n\n\naugier3pi@meige8pcpa79:~/Dev/fluidsim/bench/dedalus$ time fluidsim-bench 512 -d 2 -s ns2d -it 10\nnh = (512, 512); Lh = (8, 8)\nrunning a benchmark simulation... done.\n10 time steps computed in 0.51 s\nresults benchmarks saved in\n/tmp/fluidsim_bench/result_bench_ns2d_512x512_np=1_default_2018-10-24_10-33-2516769.json\n\nCleaning up simulation.\n\nreal    0m2.603s\nuser    0m2.132s\nsys 0m0.600s\n</pre></div>", "type": "rendered"}, "created_on": "2018-10-24T08:47:09.080175+00:00", "user": {"display_name": "Pierre Augier", "uuid": "{eb327c54-cadd-4fce-9edd-f8fe047a9b93}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beb327c54-cadd-4fce-9edd-f8fe047a9b93%7D"}, "html": {"href": "https://bitbucket.org/%7Beb327c54-cadd-4fce-9edd-f8fe047a9b93%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/9b75dc331ab1b5d848887bdbec5ec539d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPA-2.png"}}, "nickname": "paugier", "type": "user", "account_id": "557058:6d18e2f1-34f0-4139-9028-bfdac251ab12"}, "updated_on": null, "type": "issue_comment", "id": 48527885}