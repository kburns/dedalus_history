{"priority": "trivial", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "links": {"attachments": {"href": "data/repositories/dedalus-project/dedalus/issues/28/attachments_page=1.json"}, "self": {"href": "data/repositories/dedalus-project/dedalus/issues/28.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/28/watch"}, "comments": {"href": "data/repositories/dedalus-project/dedalus/issues/28/comments_page=1.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/28/non-integer-resolution-values-dont-work"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/dedalus-project/dedalus/issues/28/vote"}}, "reporter": {"display_name": "Jhett Bordwell", "uuid": "{edb9d81e-36cd-4d5d-bdcf-b73e3d2a962d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bedb9d81e-36cd-4d5d-bdcf-b73e3d2a962d%7D"}, "html": {"href": "https://bitbucket.org/%7Bedb9d81e-36cd-4d5d-bdcf-b73e3d2a962d%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:490cfe71-054b-408c-9f37-3fae874b19cc/051f0265-517a-44eb-89f3-7b2c482c6419/128"}}, "nickname": "jhbordwell", "type": "user", "account_id": "557058:490cfe71-054b-408c-9f37-3fae874b19cc"}, "title": "Non-integer resolution values don't work with Fourier bases", "component": null, "votes": 0, "watches": 3, "content": {"raw": "When providing a non-integer value for the number of elements when initializing a Fourier basis, Dedalus spits out the error that,\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"nd_dust_model_2d.py\", line 28, in <module>\r\n\r\n    domain = de.Domain([x_basis, y_basis], grid_dtype=np.float64)\r\n\r\n  File \"/usr/local/dedalus/src/dedalus/dedalus/core/domain.py\", line 46, in __init__\r\n    grid_dtype = basis.set_dtype(grid_dtype)\r\n\r\n  File \"/usr/local/dedalus/src/dedalus/dedalus/core/basis.py\", line 609, in set_dtype\r\n    native_wavenumbers = np.roll(np.arange(-kmax, kmax+1), -kmax)\r\n\r\n  File \"/usr/local/dedalus/lib/python3.4/site-packages/numpy/core/numeric.py\", line 1294, in roll\r\n    res = a.take(indexes, axis)\r\n\r\nTypeError: Cannot cast array data from dtype('float64') to dtype('int64') according to the rule 'safe'", "markup": "markdown", "html": "<p>When providing a non-integer value for the number of elements when initializing a Fourier basis, Dedalus spits out the error that,</p>\n<p>Traceback (most recent call last):</p>\n<p>File \"nd_dust_model_2d.py\", line 28, in &lt;module&gt;</p>\n<div class=\"codehilite\"><pre><span></span>domain = de.Domain([x_basis, y_basis], grid_dtype=np.float64)\n</pre></div>\n\n\n<p>File \"/usr/local/dedalus/src/dedalus/dedalus/core/domain.py\", line 46, in <strong>init</strong>\n    grid_dtype = basis.set_dtype(grid_dtype)</p>\n<p>File \"/usr/local/dedalus/src/dedalus/dedalus/core/basis.py\", line 609, in set_dtype\n    native_wavenumbers = np.roll(np.arange(-kmax, kmax+1), -kmax)</p>\n<p>File \"/usr/local/dedalus/lib/python3.4/site-packages/numpy/core/numeric.py\", line 1294, in roll\n    res = a.take(indexes, axis)</p>\n<p>TypeError: Cannot cast array data from dtype('float64') to dtype('int64') according to the rule 'safe'</p>", "type": "rendered"}, "assignee": null, "state": "wontfix", "version": null, "edited_on": null, "created_on": "2015-06-22T19:03:41.407990+00:00", "milestone": null, "updated_on": "2018-10-30T21:18:57.878086+00:00", "type": "issue", "id": 28}