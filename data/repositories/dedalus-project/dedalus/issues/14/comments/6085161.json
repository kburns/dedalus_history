{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/14/comments/6085161.json"}, "html": {"href": "#!/dedalus-project/dedalus/issues/14#comment-6085161"}}, "issue": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/issues/14.json"}}, "type": "issue", "id": 14, "repository": {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus.json"}, "html": {"href": "#!/dedalus-project/dedalus"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dc39ab6-2798-450d-af2f-e976f94b5794}ts=2009435"}}, "type": "repository", "name": "dedalus", "full_name": "dedalus-project/dedalus", "uuid": "{1dc39ab6-2798-450d-af2f-e976f94b5794}"}, "title": "Add verbose flag to ok() in integrator.py to suppress output?"}, "content": {"raw": "Implementing this in integrator looks like it requires adding a verbosity flag to the integrator call:\n```\n#!python\n    def __init__(self, problem, domain, timestepper, verbose=True):\n\n        # Input parameters\n        self.problem = problem\n        self.domain = domain\n\n        # Output control\n        self.verbose = verbose\n```\nand then in the `ok():` def:\n```\n#!python\n    @property\n    def ok(self):\n        if self.time >= self.sim_stop_time:\n            ok_flag = False\n            if (self.verbose): print('Simulation stop time reached.')\n        elif (time.time() - self.start_time) >= self.wall_stop_time:\n            ok_flag = False\n            if (self.verbose): print('Wall stop time reached.')\n        elif self.iteration >= self.stop_iteration:\n            ok_flag = False\n            if (self.verbose): print('Stop iteration reached.')\n        else:\n            ok_flag = True\n\n        return ok_flag\n```\nThis implementation appears to work.", "markup": "markdown", "html": "<p>Implementing this in integrator looks like it requires adding a verbosity flag to the integrator call:</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">problem</span><span class=\"p\">,</span> <span class=\"n\">domain</span><span class=\"p\">,</span> <span class=\"n\">timestepper</span><span class=\"p\">,</span> <span class=\"n\">verbose</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">):</span>\n\n        <span class=\"c1\"># Input parameters</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">problem</span> <span class=\"o\">=</span> <span class=\"n\">problem</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">domain</span> <span class=\"o\">=</span> <span class=\"n\">domain</span>\n\n        <span class=\"c1\"># Output control</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">verbose</span> <span class=\"o\">=</span> <span class=\"n\">verbose</span>\n</pre></div>\n\n\n<p>and then in the <code>ok():</code> def:</p>\n<div class=\"codehilite language-python\"><pre><span></span>    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">ok</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">time</span> <span class=\"o\">&gt;=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">sim_stop_time</span><span class=\"p\">:</span>\n            <span class=\"n\">ok_flag</span> <span class=\"o\">=</span> <span class=\"bp\">False</span>\n            <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">):</span> <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;Simulation stop time reached.&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"p\">(</span><span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span> <span class=\"o\">-</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start_time</span><span class=\"p\">)</span> <span class=\"o\">&gt;=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wall_stop_time</span><span class=\"p\">:</span>\n            <span class=\"n\">ok_flag</span> <span class=\"o\">=</span> <span class=\"bp\">False</span>\n            <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">):</span> <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;Wall stop time reached.&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">iteration</span> <span class=\"o\">&gt;=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">stop_iteration</span><span class=\"p\">:</span>\n            <span class=\"n\">ok_flag</span> <span class=\"o\">=</span> <span class=\"bp\">False</span>\n            <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">verbose</span><span class=\"p\">):</span> <span class=\"k\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;Stop iteration reached.&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">ok_flag</span> <span class=\"o\">=</span> <span class=\"bp\">True</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">ok_flag</span>\n</pre></div>\n\n\n<p>This implementation appears to work.</p>", "type": "rendered"}, "created_on": "2013-09-16T20:46:11.755061+00:00", "user": {"display_name": "Benjamin Brown", "uuid": "{7ccecdb3-3639-4001-8249-060e80320bda}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D"}, "html": {"href": "https://bitbucket.org/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571/8bc6f4da-871a-48b1-88ea-998663d18142/128"}}, "nickname": "Benjamin Brown", "type": "user", "account_id": "557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571"}, "updated_on": "2013-09-16T20:46:36.470010+00:00", "type": "issue_comment", "id": 6085161}