{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32/comments/8709517.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32/_/diff#comment-8709517"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32"}}, "title": "Allows for homogeneous expressions (beyond \"0\") on RHS of EVP"}, "content": {"raw": "Hi all,\n\nAs a result of the discussion on the user group (and previous discussion on the dev group from a while ago), I've moved the forcing of EVP homogenization from core/problems.py to extras/EVP.py.  There are a few reasons for this:\n\n* Feature creep = bad.  Hiding things like this in the core code = bad.  This way this tool is out in the open, and anyone who uses it fully understands that they're NOT just doing an EVP solve, but that this wrapper will force their RHS's to 0.\n* There has been some talk of other possible tools to make EVPs more useful (mass parallelization of parameter spaces as well as wave numbers, some work Susan's doing, etc.), and this file would be a good place to add those tools in the future.\n\nDedalus is made to be flexible and to have the user explicitly write out their equations.  By that logic the user should set RHS = 0 and run the normal EVP.  Unfortunately, hindsight is 20/20 and I don't expect current and future users to write their equations with perfect modularity (e.g. using substitutions and making a call like 'problem.add_equation('eq1_LHS = eq1_RHS')'), especially since the documentation to tell users to do that doesn't seem to be abundantly easy to find.   In practice, equations are generally messier than this, and setting up homogeneous equations takes much more footwork and invites much more opportunity for typos, sign errors, headaches, etc.  This will allow users to homogenize and run EVPs without having to worry about correctly entering two sets of equations (homogeneous and non-homogeneous), but keeps the core code base untouched.", "markup": "markdown", "html": "<p>Hi all,</p>\n<p>As a result of the discussion on the user group (and previous discussion on the dev group from a while ago), I've moved the forcing of EVP homogenization from core/problems.py to extras/EVP.py.  There are a few reasons for this:</p>\n<ul>\n<li>Feature creep = bad.  Hiding things like this in the core code = bad.  This way this tool is out in the open, and anyone who uses it fully understands that they're NOT just doing an EVP solve, but that this wrapper will force their RHS's to 0.</li>\n<li>There has been some talk of other possible tools to make EVPs more useful (mass parallelization of parameter spaces as well as wave numbers, some work Susan's doing, etc.), and this file would be a good place to add those tools in the future.</li>\n</ul>\n<p>Dedalus is made to be flexible and to have the user explicitly write out their equations.  By that logic the user should set RHS = 0 and run the normal EVP.  Unfortunately, hindsight is 20/20 and I don't expect current and future users to write their equations with perfect modularity (e.g. using substitutions and making a call like 'problem.add_equation('eq1_LHS = eq1_RHS')'), especially since the documentation to tell users to do that doesn't seem to be abundantly easy to find.   In practice, equations are generally messier than this, and setting up homogeneous equations takes much more footwork and invites much more opportunity for typos, sign errors, headaches, etc.  This will allow users to homogenize and run EVPs without having to worry about correctly entering two sets of equations (homogeneous and non-homogeneous), but keeps the core code base untouched.</p>", "type": "rendered"}, "created_on": "2015-07-31T18:28:30.424510+00:00", "user": {"display_name": "Evan Anders", "uuid": "{ce45a673-fcc9-48fc-a547-f4ee9f3a8020}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D"}, "html": {"href": "https://bitbucket.org/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:320d4568-38ec-40ab-9264-ac9b3760572a/7e7ec364-57a7-4b6a-809c-b17a66066163/128"}}, "nickname": "evanhanders", "type": "user", "account_id": "557058:320d4568-38ec-40ab-9264-ac9b3760572a"}, "updated_on": "2015-07-31T18:28:30.513170+00:00", "type": "pullrequest_comment", "id": 8709517}, {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32/comments/8709787.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32/_/diff#comment-8709787"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32"}}, "title": "Allows for homogeneous expressions (beyond \"0\") on RHS of EVP"}, "content": {"raw": "Evan,\n     This seems like a sensible and clean approach to the problem.\n\n--Ben", "markup": "markdown", "html": "<p>Evan,\n     This seems like a sensible and clean approach to the problem.</p>\n<p>--Ben</p>", "type": "rendered"}, "created_on": "2015-07-31T18:39:37.381327+00:00", "user": {"display_name": "Benjamin Brown", "uuid": "{7ccecdb3-3639-4001-8249-060e80320bda}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D"}, "html": {"href": "https://bitbucket.org/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571/8bc6f4da-871a-48b1-88ea-998663d18142/128"}}, "nickname": "Benjamin Brown", "type": "user", "account_id": "557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571"}, "updated_on": "2015-07-31T18:39:37.391709+00:00", "type": "pullrequest_comment", "id": 8709787}, {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32/comments/9189225.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32/_/diff#comment-9189225"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32"}}, "title": "Allows for homogeneous expressions (beyond \"0\") on RHS of EVP"}, "content": {"raw": "I just pushed up a first run implementation of allowing a homogeneity tolerance (basically, accepting the RHS for the EVP if it's essentially zero).  The logic of what I've implemented is this:\n\n1. Evaluate the expression\n2. PIck out the max(abs(evaluated expression))\n3. Pick out the max(abs(all of the NCCs that went into calculating that expression))\n4. compare max(evaluated) / max(NCCs) to a tolerance (right now 1e-10 default or user-specified by kwarg)\n5. if the max ratio of #4 is < tol, then the expression is considered homogeneous.\n\nAs it currently stands, what this means is that if you have a problem with bigger parameters (let's say order 1e5), then the expression only has to have a max of 1e-5 in order to fit within a tol of 1e-10.  If you have maximum NCCs of 1e-3, then you need the expression maximum to be 1e-13 to fit within a tol of 1e-10.  This isn't a perfect implementation, and I'm definitely open to suggestions.\n\nOther things to note: I'm not sure where all of the functionality of dedalus is hidden and it's highly possible that I re-implemented something that it can already do.  If so, point me in the direction of those functions and I'll clean stuff up.\n\nI'm also happy to clean up comments and logger info, but right now I'm just trying to make things fairly obvious so that it's clear what I'm doing.", "markup": "markdown", "html": "<p>I just pushed up a first run implementation of allowing a homogeneity tolerance (basically, accepting the RHS for the EVP if it's essentially zero).  The logic of what I've implemented is this:</p>\n<ol>\n<li>Evaluate the expression</li>\n<li>PIck out the max(abs(evaluated expression))</li>\n<li>Pick out the max(abs(all of the NCCs that went into calculating that expression))</li>\n<li>compare max(evaluated) / max(NCCs) to a tolerance (right now 1e-10 default or user-specified by kwarg)</li>\n<li>if the max ratio of <a href=\"#!/dedalus-project/dedalus/issues/4/piecewise-bases\" rel=\"nofollow\" title=\"Piecewise bases\" class=\"ap-connect-link\"><s>#4</s></a> is &lt; tol, then the expression is considered homogeneous.</li>\n</ol>\n<p>As it currently stands, what this means is that if you have a problem with bigger parameters (let's say order 1e5), then the expression only has to have a max of 1e-5 in order to fit within a tol of 1e-10.  If you have maximum NCCs of 1e-3, then you need the expression maximum to be 1e-13 to fit within a tol of 1e-10.  This isn't a perfect implementation, and I'm definitely open to suggestions.</p>\n<p>Other things to note: I'm not sure where all of the functionality of dedalus is hidden and it's highly possible that I re-implemented something that it can already do.  If so, point me in the direction of those functions and I'll clean stuff up.</p>\n<p>I'm also happy to clean up comments and logger info, but right now I'm just trying to make things fairly obvious so that it's clear what I'm doing.</p>", "type": "rendered"}, "created_on": "2015-08-18T20:43:17.525140+00:00", "user": {"display_name": "Evan Anders", "uuid": "{ce45a673-fcc9-48fc-a547-f4ee9f3a8020}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D"}, "html": {"href": "https://bitbucket.org/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:320d4568-38ec-40ab-9264-ac9b3760572a/7e7ec364-57a7-4b6a-809c-b17a66066163/128"}}, "nickname": "evanhanders", "type": "user", "account_id": "557058:320d4568-38ec-40ab-9264-ac9b3760572a"}, "updated_on": "2015-08-18T20:43:17.723654+00:00", "type": "pullrequest_comment", "id": 9189225}, {"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32/comments/9216312.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32/_/diff#comment-9216312"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/32.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/32"}}, "title": "Allows for homogeneous expressions (beyond \"0\") on RHS of EVP"}, "content": {"raw": "Linking to related mailing list discussions:\n\nhttps://groups.google.com/forum/#!topic/dedalus-users/gB2mYATjjfE\n\nhttps://groups.google.com/forum/#!topic/dedalus-dev/BTX7p7wDja4", "markup": "markdown", "html": "<p>Linking to related mailing list discussions:</p>\n<p><a href=\"https://groups.google.com/forum/#!topic/dedalus-users/gB2mYATjjfE\" rel=\"nofollow\" class=\"ap-connect-link\">https://groups.google.com/forum/#!topic/dedalus-users/gB2mYATjjfE</a></p>\n<p><a href=\"https://groups.google.com/forum/#!topic/dedalus-dev/BTX7p7wDja4\" rel=\"nofollow\" class=\"ap-connect-link\">https://groups.google.com/forum/#!topic/dedalus-dev/BTX7p7wDja4</a></p>", "type": "rendered"}, "created_on": "2015-08-19T15:13:38.578982+00:00", "user": {"display_name": "Keaton Burns", "uuid": "{3d3e64f1-bf12-45df-b655-4543d8fb34c4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D"}, "html": {"href": "https://bitbucket.org/%7B3d3e64f1-bf12-45df-b655-4543d8fb34c4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e31a7835-5317-4dfa-8551-f32a06f40279/40f33f99-2b75-4a17-a8c2-07c8d74c7480/128"}}, "nickname": "kburns", "type": "user", "account_id": "557058:e31a7835-5317-4dfa-8551-f32a06f40279"}, "updated_on": "2015-08-19T15:13:38.586485+00:00", "type": "pullrequest_comment", "id": 9216312}], "page": 1, "size": 4}