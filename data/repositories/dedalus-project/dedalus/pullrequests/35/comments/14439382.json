{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/35/comments/14439382.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/35/_/diff#comment-14439382"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 35, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/35.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/35"}}, "title": "Simple Checkpointing mechanism"}, "content": {"raw": "First: I've been using this PR for a few days now -- works great!\n\nI just ran into a problem where I tried to restart a simulation where (I think?) my previous run had created a file but written nothing to it.  Not exactly sure.  It was weird.  BUT changing lines 99-100 of checkpointing.py to:\n\n```\n#!python\nif len(c) > 0 and len(s) > 0:\n    counts[d.name] = c.max()\n    sets[d.name] = s.max()\n```\nfixed the problem.  I had zero-length c's and s's, and it was exploding repeatedly.  Not sure WHY they were zero-length.\n", "markup": "markdown", "html": "<p>First: I've been using this PR for a few days now -- works great!</p>\n<p>I just ran into a problem where I tried to restart a simulation where (I think?) my previous run had created a file but written nothing to it.  Not exactly sure.  It was weird.  BUT changing lines 99-100 of checkpointing.py to:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span> <span class=\"ow\">and</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n    <span class=\"n\">counts</span><span class=\"p\">[</span><span class=\"n\">d</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">c</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span>\n    <span class=\"n\">sets</span><span class=\"p\">[</span><span class=\"n\">d</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">max</span><span class=\"p\">()</span>\n</pre></div>\n\n\n<p>fixed the problem.  I had zero-length c's and s's, and it was exploding repeatedly.  Not sure WHY they were zero-length.</p>", "type": "rendered"}, "created_on": "2016-02-11T02:59:34.988207+00:00", "user": {"display_name": "Evan Anders", "uuid": "{ce45a673-fcc9-48fc-a547-f4ee9f3a8020}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D"}, "html": {"href": "https://bitbucket.org/%7Bce45a673-fcc9-48fc-a547-f4ee9f3a8020%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:320d4568-38ec-40ab-9264-ac9b3760572a/7e7ec364-57a7-4b6a-809c-b17a66066163/128"}}, "nickname": "evanhanders", "type": "user", "account_id": "557058:320d4568-38ec-40ab-9264-ac9b3760572a"}, "updated_on": "2016-02-11T02:59:35.059701+00:00", "type": "pullrequest_comment", "id": 14439382}