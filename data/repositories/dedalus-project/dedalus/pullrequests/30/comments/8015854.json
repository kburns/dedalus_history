{"links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/30/comments/8015854.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/30/_/diff#comment-8015854"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 30, "links": {"self": {"href": "data/repositories/dedalus-project/dedalus/pullrequests/30.json"}, "html": {"href": "#!/dedalus-project/dedalus/pull-requests/30"}}, "title": "[WIP] Checkpointing and restart capability"}, "content": {"raw": "Here's a quick summary of issues I see as needing addressed before this can be merged.  Please add further suggestions, I'll do the same, and then we can get a first iteration of checkpointing finished.\n\n\nOutstanding to-do list:\n\n1. Automatic variable spatial resolution\n    * possible to do: need to store current resolution in standard way in metadata?\n    * Right now, it's not clear how to figure out which dimensions are which, but this may already be sufficiently embedded in the checkpoint file.  Beware possible \"stored in coeff space but restart in grid space problems like Ghanesh encountered.\n\n2. Exact timestepper restart capability:\n    A. Pick up prior dt for exact restart reproducibility using RK and other multistage methods \n        * to do: need to store prior dt in metadata\n\n    B. Consider mechanism for exact restarts in multistep methods.  \n        * Currently, we bootstrap on restart from low order to desired order. \n        * Exact restart requires storing multiple prior timesteps to fully re-create the solution.   \n        * This may be deferred to a later PR.\n\n3. Optionally pick up existing write number for analysis files, to avoid clobbering exisiting outputs on restart\n    * default should be to pick up write number.\n    * optional in case you are branching a case at restart (parameter change, etc.)\n\n4. Implement layout restart bugfix from Ghanesh & @lecoanet (comment above)\n\n5. possible: implement parameter based naming for output data dir in example script, as in FC_nrho3.5py\n\n6. possible: test for restart that runs short case, does restart at midway point, compares differences after restart and after timestepping?\n\n\n\nI view 1--4 as critical before merge, while 5 & 6 are optional and (like 2.B) could be done in a later PR.", "markup": "markdown", "html": "<p>Here's a quick summary of issues I see as needing addressed before this can be merged.  Please add further suggestions, I'll do the same, and then we can get a first iteration of checkpointing finished.</p>\n<p>Outstanding to-do list:</p>\n<ol>\n<li>\n<p>Automatic variable spatial resolution</p>\n<ul>\n<li>possible to do: need to store current resolution in standard way in metadata?</li>\n<li>Right now, it's not clear how to figure out which dimensions are which, but this may already be sufficiently embedded in the checkpoint file.  Beware possible \"stored in coeff space but restart in grid space problems like Ghanesh encountered.</li>\n</ul>\n</li>\n<li>\n<p>Exact timestepper restart capability:\n    A. Pick up prior dt for exact restart reproducibility using RK and other multistage methods \n        * to do: need to store prior dt in metadata</p>\n<p>B. Consider mechanism for exact restarts in multistep methods.<br />\n    * Currently, we bootstrap on restart from low order to desired order. \n    * Exact restart requires storing multiple prior timesteps to fully re-create the solution. <br />\n    * This may be deferred to a later PR.</p>\n</li>\n<li>\n<p>Optionally pick up existing write number for analysis files, to avoid clobbering exisiting outputs on restart</p>\n<ul>\n<li>default should be to pick up write number.</li>\n<li>optional in case you are branching a case at restart (parameter change, etc.)</li>\n</ul>\n</li>\n<li>\n<p>Implement layout restart bugfix from Ghanesh &amp; @lecoanet (comment above)</p>\n</li>\n<li>\n<p>possible: implement parameter based naming for output data dir in example script, as in FC_nrho3.5py</p>\n</li>\n<li>\n<p>possible: test for restart that runs short case, does restart at midway point, compares differences after restart and after timestepping?</p>\n</li>\n</ol>\n<p>I view 1--4 as critical before merge, while 5 &amp; 6 are optional and (like 2.B) could be done in a later PR.</p>", "type": "rendered"}, "created_on": "2015-07-04T21:13:28.089791+00:00", "user": {"display_name": "Benjamin Brown", "uuid": "{7ccecdb3-3639-4001-8249-060e80320bda}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D"}, "html": {"href": "https://bitbucket.org/%7B7ccecdb3-3639-4001-8249-060e80320bda%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571/8bc6f4da-871a-48b1-88ea-998663d18142/128"}}, "nickname": "Benjamin Brown", "type": "user", "account_id": "557058:0696c4b9-e94c-41ac-82be-62ad4f0ec571"}, "updated_on": "2015-07-04T21:13:28.100060+00:00", "type": "pullrequest_comment", "id": 8015854}